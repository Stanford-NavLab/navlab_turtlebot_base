<launch>
  <arg name="robot_name" default="turtlebot1"/>
  <arg name="sim" default="true"/>
  <arg name="model" default="burger"/>
  <arg name="move_forward_only" default="true"/>

  <include file="$(find turtlebot3_bringup)/launch/includes/description.launch.xml">
    <arg name="model" value="$(arg model)" />
  </include>

  <node pkg="robot_state_publisher" type="robot_state_publisher" name="robot_state_publisher">
    <param name="publish_frequency" type="double" value="50.0" />
  </node>

  <group if="$(arg sim)">
    <!-- Spawn the robot in Gazebo with ROS parameter initialization -->
    <node pkg="navlab_turtlebot_base" type="spawn_model.py" name="navlab_spawn_urdf"
        args="$(arg robot_name)" output="screen"/>

    <!-- static map publisher -->
    <node pkg="tf" type="static_transform_publisher" name="map_odom_publisher"
      args="0 0 0 0 0 0 1 map $(arg robot_name)_tf/odom 100" />

    <!-- move_base -->
    <include file="$(find navlab_turtlebot_planning)/launch/move_base_multi.launch">
      <arg name="model" value="$(arg model)" />
      <arg name="robot_name" value="$(arg robot_name)" />
      <arg name="move_forward_only" value="$(arg move_forward_only)"/>
      <arg name="odom_topic" value="$(arg robot_name)_tf/odom"/>
    </include>
  </group>

  <group if="$(eval not(arg('sim')))">
    <node pkg="tf" type="static_transform_publisher" name="vrpn2footprint_$(arg robot_name)"
      args="0 0 0 0 0 0 1 $(arg robot_name) $(arg robot_name)_tf/base_footprint 100" />
  </group>

</launch>
